/**
 * 与后端交互的API
 * 依赖jquery
 * Created by chao on 2015/4/11.
 */

API_ROOT = "app/";

var api = {
    "user": {
        "test": function (name, password,callback)
        {
            $.post(API_ROOT+"test.php",
                {
                    "name":name,
                    "password":password
                },
                function(data,status)
                {
                    if(status=="success")
                        callback(data);
                    else
                        callback({"code":0,"message":status});
                });
        },
        "createUser": function ()
        {

        }
    },
    "task": {
        "createTask":function(taskContent,date,flag,callback){
            //TODO 具体路径
            $.post(API_ROOT+"",
                {
                    "taskContent":taskContent,
                    "date":date,
                    "flag":flag
                },
            function(data,status){
               if(status=="success"){
                   callback(eval(data));
               }else{
                   callback({"code":0,"message":status});
               }
            });
        },
        "requireTaskList":function(date,callback){
            //TODO 路径
            $.get(API_ROOT+"",
                {
                    "date":date
                },
            function(data,status){
                if(status=="success"){
                    callback(eval(data));
                }else{
                    callback({"code":0,"message":status});
                }
            });
        },
        "checkTask":function(id,callback){
            $.post(API_ROOT+"",
                {
                    "id":id
                },
            function(data,status){
                if(status=="success"){
                    callback(eval(data));
                }else{
                    callback({"code":0,"message":status});
                }
            });
        },
        "uncheckTask":function(id,callback){
            $.post(API_ROOT+"",
                {
                    "id":id
                },
                function(data,status){
                    if(status=="success"){
                        callback(eval(data));
                    }else{
                        callback({"code":0,"message":status});
                    }
                });
        },
        "removeTask":function(id,callback){
            $.post(API_ROOT+"",
                {
                    "id":id
                },
            function(data,status){
                if(status=="success"){
                    callback(eval(data));
                }else{
                    callback({"code":0,"message":status});
                }
            });
        },
        "removeAllCompletedTask":function(date,callback){
            $.get(API_ROOT+"",
                {
                    "date":date
                },
                function(data,status){
                    if(status=="success"){
                        callback(eval(data));
                    }else{
                        callback({"code":0,"message":status});
                    }
                });
        },
        "modifyTaskContent": function (id, content, callback) {
            $.post(API_ROOT+"",
                {
                    "id":id,
                    "content":content
                },
                function(data,status){
                    if(status=="success"){
                        callback(eval(data));
                    }else{
                        callback({"code":0,"message":status});
                    }
                });
        },
        "modifyTaskOrder":function(preId,id,callback){
            $.post(API_ROOT+"",
                {
                    "preId":preId,
                    "id":id
                },
                function(data,status){
                    if(status=="success"){
                        callback(eval(data));
                    }else{
                        callback({"code":0,"message":status});
                    }
                });
        },
        "modifyTaskDate":function(id,date,callback){
            $.post(API_ROOT+"",
                {
                    "id":id,
                    "date":date
                },
                function(data,status){
                    if(status=="success"){
                        callback(eval(data));
                    }else{
                        callback({"code":0,"message":status});
                    }
                });
        },
        "delTask":function(id,callback){
            $.post(API_ROOT+"",
            {
                "id":id
            },
          function(data,status){
              if(status=="success"){
                  callback(eval(data));
              }else{
                  callback({"code":0,"message":status});
              }
          });
        },
        "delAllTask":function(callback){
            $.post(API_ROOT+"",{},function(data,status){
                if(status=="success"){
                    callback(eval(data));
                }else{
                    callback({"code":0,"message":status});
                }
            });
        }
    },
    "test":{
        "getTaskList":function(date,callback){
            $.get(API_ROOT+"test.php",
                {
                "date":date
                },
                function (data,status) {
                    if(status=="success"){
                        callback(eval(data));
                    }
                    else
                        callback({"code":0,"message":status});
                });

        }
    }
};